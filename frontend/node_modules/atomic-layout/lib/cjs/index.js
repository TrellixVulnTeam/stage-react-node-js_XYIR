"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@atomic-layout/core"),r=e(require("styled-components")),n=require("react"),o=e(n);const s=r.div`
  display: ${({flex:e,inline:t})=>e?t?"inline-flex":"flex":t?"inline-block":"block"};

  && {
    ${t.applyStyles};
  }
`;s.displayName="Box";const i=e=>n.forwardRef(e),a=e=>t.compose(t.joinQueryList(([e,r])=>`(${e}:${/^\d/.test(String(r))?t.transformNumeric(r):r})`),t.normalizeQuery)(e),c=(e,t=!1)=>{const r="undefined"==typeof window?n.useEffect:n.useLayoutEffect,[o,s]=n.useState(t),i=n.useMemo(()=>[].concat(e).map(a).join(","),[e]),c=e=>{s(e.matches)};return r(()=>{const e=matchMedia(i);return c(e),e.addListener(c),()=>{e.removeListener(c)}},Object.keys(e)),o},p=(e,t)=>{const r=i(({children:r,...o},s)=>c(t)&&n.createElement(e,Object.assign({ref:s},o),r));return r.displayName=`Placeholder(${e.displayName})`,r},u=r.div`
  && {
    ${t.applyStyles};
    display: ${({inline:e})=>e?"inline-grid":"grid"};
  }
`,l=e=>i((t,r)=>n.createElement(s,Object.assign({ref:r,area:e},t))),d=i(({children:e,...r},o)=>{const s=t.parseTemplates(r),i=n.useMemo(()=>t.generateComponents(s,l,p),[s]),a=Object.keys(i).length>0,c=typeof e,d="function"===c;return t.warn(!(a&&!d),`Failed to render 'Composition' with template areas ["${Object.keys(i).join('", "')}"]: expected children to be a function, but got: ${c}. Please provide render function as children, or remove assigned template props (\`areas\`/\`template\`).`),n.createElement(u,Object.assign({ref:o},r),a&&d?e(i):e)});d.displayName="Composition";const f=(e,r=70)=>{const o=n.useRef();n.useEffect(()=>{o.current=t.throttle(e,r)}),n.useEffect(()=>{const{current:e}=o;return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[])},m=e=>"string"==typeof e?t.Layout.breakpoints[e]:e,y=t.memoizeWith(e=>Object.entries(e).filter(([,e])=>null!=e).reduce((e,[t,r])=>e.concat(`${t}=${r.toString()}`),[]).join())(e=>(e=>{const{for:r,from:n,to:o,except:s}=e;if(r)return[m(r)];const i=m(n),a=m(o);if(i&&a&&!s){return[t.mergeAreaRecords({behavior:"down",breakpoint:a},{behavior:"up",breakpoint:i},!1).breakpoint]}return i&&a&&s?[t.closeBreakpoint(i),t.openBreakpoint(a)]:i&&!a?[t.openBreakpoint(i)]:!i&&a?[t.closeBreakpoint(a)]:[]})(e).map(a).join(e.except?",":" "));function b(e,t=!1){const[r,o]=n.useState(t),s=y(e);return f(()=>{const{matches:e}=matchMedia(s);o(e)}),r}const h=i(({children:e,except:t,for:r,from:o,to:i,...a},c)=>b({for:r,from:o,to:i,except:t})&&n.createElement(s,Object.assign({ref:c},a),e));h.displayName="Only";const x=r(s)`
  ${({matches:e})=>!e&&"\n      visibility: hidden;\n    "}
`,k=i(({children:e,except:t,for:r,from:n,to:s,...i},a)=>{const c=b({except:t,for:r,from:n,to:s}),p=c?{}:{"aria-hidden":"true"};return o.createElement(x,Object.assign({ref:a},i,p,{matches:c}),e)});k.displayName="Visible";const g=(e,r,n=t.Layout.breakpoints)=>{let o;f(()=>{const r=Object.keys(n).find(e=>{const r=t.createMediaQuery(n[e],"only");return matchMedia(r).matches});o!==r&&(e(r),o=r)},r)},j=e=>{const{breakpoint:r,behavior:n}=e,o=t.createMediaQuery(t.Layout.breakpoints[r.name],n);return matchMedia(o).matches},v=e=>{const{breakpoint:t}=e;return t.isDefault&&"undefined"==typeof window},w=(e,r=j)=>Object.keys(e).map(t.parsePropName).filter(r).reduce((t,{originPropName:r,purePropName:n})=>({...t,[n]:e[r]}),{}),O=e=>{const[t,r]=n.useState(w(e,v)),[o,s]=n.useState();return g(s),n.useEffect(()=>{const t=w(e);r(t)},[e,o]),t||{}};exports.Box=s,exports.Composition=d,exports.Only=h,exports.Visible=k,exports.default=t.Layout,exports.makeResponsive=function(e){return o.forwardRef((t,r)=>{const n=O(t);return o.createElement(e,Object.assign({ref:r},n))})},exports.query=y,exports.useBreakpointChange=g,exports.useMediaQuery=c,exports.useResponsiveProps=O,exports.useResponsiveQuery=b,exports.useResponsiveValue=(e,r)=>{const[o,s]=n.useState(r),i=()=>{const n=t.withBreakpoints(e,r);s(n)};return n.useEffect(i,[e,r]),g(i),o},exports.useViewportChange=f;
//# sourceMappingURL=index.js.map
