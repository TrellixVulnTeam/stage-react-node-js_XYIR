{"ast":null,"code":"var _jsxFileName = \"/Users/yasmine/Desktop/stage/aidchannel-front/src/pages/webmaster/ProjectOfMonth.js\",\n    _s = $RefreshSig$();\n\nimport { disabledPojectOfMonth, enablePojectOfMonth, getProject2, updateProject } from \"apis/projectApi\";\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport Flag from \"react-world-flags\";\nimport JoditEditor from \"jodit-react\";\nimport { getOneInterviewTypesByName } from \"apis/interviewTypeApi\";\nimport { addInterview, getInterviewByProjectAndType, updateInterview } from \"apis/interviewApi\";\nimport { getCountryByCode } from \"apis/countryApi\";\nimport ProjectOfTheMontInterview from \"components/aidchannel/webmaster/ProjectOfTheMontInterview\";\nimport fakeLogo from \"../../assets/images/fakeLogo.png\";\nimport { Checkbox } from \"@material-ui/core\";\nimport { AiFillFileAdd } from \"react-icons/ai\";\nimport urlImageAdapter from \"helpers/urlImageAdapter\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ProjectOfMonth = () => {\n  _s();\n\n  const {\n    codeCountry,\n    idProject\n  } = useParams();\n  const [checked, setChecked] = useState();\n  const editor = useRef(null);\n  const [copContent, setCopContent] = useState(\"\");\n  const [donorContent, setDonorContent] = useState(\"\");\n  const [beneficiaryContent, setBeneficiaryContent] = useState(\"\");\n  const [projectContent, setProjectContent] = useState(\"\");\n  const [copType, setCopType] = useState(null);\n  const [donorType, setDonorType] = useState();\n  const [beneficiaryType, setBeneficiaryType] = useState();\n  const [projectInterviewCop, setProjectInterviewCop] = useState();\n  const [projectInterviewDonor, setProjectInterviewDonor] = useState();\n  const [projectInterviewBeneficiary, setProjectInterviewBeneficiary] = useState();\n  const [test, setTest] = useState(false);\n  const [copLoading, setCopLoading] = useState(false);\n  const [donorLoading, setdonorLoading] = useState(false);\n  const [beneficiaryLoading, setBeneficiaryLoading] = useState(false);\n  const [copAddLoading, setCopAddLoading] = useState(false);\n  const [donorAddLoading, setdonorAddLoading] = useState(false);\n  const [beneficiaryAddLoading, setBeneficiaryAddLoading] = useState(false);\n  const [projectEditLoading, setProjectEditLoading] = useState(false); // logos state\n\n  const [copLogoPreview, setCopLogoPreview] = useState(null);\n  const [copLogo, setCopLogo] = useState();\n  const [donorLogoPreview, setDonorLogoPreview] = useState(null);\n  const [donorLogo, setDonorLogo] = useState();\n  const [beneficiaryLogoPreview, setBeneficiaryLogoPreview] = useState(null);\n  const [beneficiaryLogo, setBeneficiaryLogo] = useState();\n  const [country, setCountry] = useState();\n  const [projectLogoPreview, setProjectLogoPreview] = useState(null);\n  const [projectLogo, setProjectLogo] = useState();\n  const copConfig = {\n    readonly: false,\n    placeholder: \"COP Interview\"\n  };\n  const donorConfig = {\n    readonly: false,\n    placeholder: \"DONOR Interview\"\n  };\n  const beneficiaryConfig = {\n    readonly: false,\n    placeholder: \"Beneficiary Interview\"\n  };\n  const projectConfig = {\n    readonly: false,\n    placeholder: \"Project of the month description\"\n  };\n  const getDataFromApi = useCallback(async () => {\n    const country = await getCountryByCode(codeCountry);\n    setCountry(country);\n    const project = await getProject2(idProject);\n    setProjectLogoPreview(urlImageAdapter(project === null || project === void 0 ? void 0 : project.image_url));\n    setChecked(project === null || project === void 0 ? void 0 : project.project_of_month);\n    setProjectContent(project === null || project === void 0 ? void 0 : project.description);\n    const cop = await getOneInterviewTypesByName(\"COP\");\n    setCopType(cop);\n    const donor = await getOneInterviewTypesByName(\"DONOR\");\n    setDonorType(donor);\n    const beneficiary = await getOneInterviewTypesByName(\"BENEFICIARY\");\n    setBeneficiaryType(beneficiary);\n    const copInterview = await getInterviewByProjectAndType(project === null || project === void 0 ? void 0 : project._id, cop._id);\n    setProjectInterviewCop(copInterview);\n    if (copInterview) setCopLogoPreview(`${process.env.REACT_APP_BACKEND}${copInterview === null || copInterview === void 0 ? void 0 : copInterview.interviewImage}`);\n    const donorInterview = await getInterviewByProjectAndType(project === null || project === void 0 ? void 0 : project._id, donor._id);\n    setProjectInterviewDonor(donorInterview);\n    if (donorInterview) setDonorLogoPreview(`${process.env.REACT_APP_BACKEND}${donorInterview === null || donorInterview === void 0 ? void 0 : donorInterview.interviewImage}`);\n    const beneficiaryInterview = await getInterviewByProjectAndType(project === null || project === void 0 ? void 0 : project._id, beneficiary._id);\n    setProjectInterviewBeneficiary(beneficiaryInterview);\n    if (beneficiaryInterview) setBeneficiaryLogoPreview(`${process.env.REACT_APP_BACKEND}${beneficiaryInterview === null || beneficiaryInterview === void 0 ? void 0 : beneficiaryInterview.interviewImage}`);\n    if (copInterview !== null) setCopContent(copInterview === null || copInterview === void 0 ? void 0 : copInterview.interview);\n    if (donorInterview !== null) setDonorContent(donorInterview === null || donorInterview === void 0 ? void 0 : donorInterview.interview);\n    if (beneficiaryInterview !== null) setBeneficiaryContent(beneficiaryInterview === null || beneficiaryInterview === void 0 ? void 0 : beneficiaryInterview.interview); //alert(JSON.stringify(copInterview));\n  }, [idProject]);\n  useEffect(() => {\n    getDataFromApi();\n  }, [getDataFromApi, test]);\n\n  const handleChangeCheckbox = async () => {\n    setChecked(!checked);\n\n    if (checked === true) {\n      await disabledPojectOfMonth(idProject);\n    } else {\n      await enablePojectOfMonth(idProject, codeCountry);\n    }\n  };\n\n  const addCop = async () => {\n    // initialiser les donnees\n    let formData = new FormData();\n    formData.append(\"interview\", copContent);\n    formData.append(\"type_interview\", copType === null || copType === void 0 ? void 0 : copType._id);\n    formData.append(\"project\", idProject);\n    formData.append(\"interviewImage\", copLogo);\n    formData.append(\"country\", country._id);\n    setCopAddLoading(true);\n    await addInterview(formData);\n    setTest(!test);\n    setCopAddLoading(false);\n  };\n\n  const addDonor = async () => {\n    // initialiser les donnees\n    const country = await getCountryByCode(codeCountry);\n    let formData = new FormData();\n    formData.append(\"interview\", donorContent);\n    formData.append(\"type_interview\", donorType === null || donorType === void 0 ? void 0 : donorType._id);\n    formData.append(\"project\", idProject);\n    formData.append(\"interviewImage\", donorLogo);\n    formData.append(\"country\", country._id);\n    setdonorAddLoading(true);\n    await addInterview(formData);\n    setTest(!test);\n    setdonorAddLoading(false);\n  };\n\n  const addBeneficiary = async () => {\n    // initialiser les donnees\n    const country = await getCountryByCode(codeCountry);\n    let formData = new FormData();\n    formData.append(\"interview\", beneficiaryContent);\n    formData.append(\"type_interview\", beneficiaryType === null || beneficiaryType === void 0 ? void 0 : beneficiaryType._id);\n    formData.append(\"project\", idProject);\n    formData.append(\"interviewImage\", beneficiaryLogo);\n    formData.append(\"country\", country._id);\n    setBeneficiaryAddLoading(true);\n    await addInterview(formData);\n    setTest(!test);\n    setBeneficiaryAddLoading(false);\n  };\n\n  const EditCop = async () => {\n    let formData = new FormData();\n    formData.append(\"interview\", copContent);\n    if (copLogo != undefined) formData.append(\"interviewImage\", copLogo);\n    setCopLoading(true);\n    await updateInterview(projectInterviewCop._id, formData);\n    setTest(!test);\n    setCopLoading(false);\n  };\n\n  const editDonor = async () => {\n    let formData = new FormData();\n    formData.append(\"interview\", donorContent);\n    if (donorLogo != undefined) formData.append(\"interviewImage\", donorLogo);\n    setdonorLoading(true);\n    await updateInterview(projectInterviewDonor._id, formData);\n    setTest(!test);\n    setdonorLoading(false);\n  };\n\n  const editBeneficiary = async () => {\n    let formData = new FormData();\n    formData.append(\"interview\", beneficiaryContent);\n    if (beneficiaryLogo != undefined) formData.append(\"interviewImage\", beneficiaryLogo);\n    setBeneficiaryLoading(true);\n    await updateInterview(projectInterviewBeneficiary._id, formData);\n    setTest(!test);\n    setBeneficiaryLoading(false);\n  };\n\n  const editProject = async () => {\n    let formData = new FormData();\n    formData.append(\"description\", projectContent);\n    if (projectLogo != undefined) formData.append(\"projectImage\", projectLogo);\n    setProjectEditLoading(true);\n    await updateProject(idProject, formData);\n    setProjectEditLoading(false);\n  };\n\n  const imagePreview = e => {\n    setProjectLogoPreview(URL.createObjectURL(e.target.files[0]));\n    setProjectLogo(e.target.files[0]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container my-4\",\n    children: codeCountry && projectInterviewCop !== undefined && projectInterviewDonor !== undefined && projectInterviewBeneficiary !== undefined && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [/*#__PURE__*/_jsxDEV(Flag, {\n          code: codeCountry,\n          height: \"70\",\n          width: \"70\",\n          style: {\n            marginRight: \"2px\"\n          },\n          className: \"flag\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 15\n        }, this), \" \", \"Project Of The Month\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check\",\n        children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n          checked: checked,\n          onChange: handleChangeCheckbox,\n          inputProps: {\n            \"aria-label\": \"primary checkbox\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          for: \"defaultCheck1\",\n          children: \"Project of the month\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-5 p-3\",\n        style: {\n          border: \"1px solid #e6e6fa\",\n          boxShadow: \"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group m-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"ml-4 logo-file d-inline\",\n            htmlFor: \"projectLogo\",\n            children: [projectLogoPreview && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: projectLogoPreview,\n              alt: \"avatar\",\n              style: {\n                cursor: \"pointer\"\n              },\n              width: \"15%\",\n              height: \"15%\",\n              className: \"avatar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 21\n            }, this), !projectLogoPreview && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                cursor: \"pointer\"\n              },\n              children: [\"Project of Month Image\", \" \", /*#__PURE__*/_jsxDEV(AiFillFileAdd, {\n                color: \"blue\",\n                size: 40\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            className: \"form-control-file ml-4 shadow-none logo-file d-none\",\n            id: \"projectLogo\",\n            name: \"projectLogo\",\n            onChange: imagePreview,\n            multiple: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(JoditEditor, {\n            ref: editor,\n            value: projectContent,\n            config: projectConfig,\n            tabIndex: 1,\n            onBlur: newContent => setProjectContent(newContent)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 17\n          }, this), !projectEditLoading ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => editProject(),\n            className: \"btn btn-warning  mt-3  shadow-none\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner-border text-danger m-3\",\n            role: \"status\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Loading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-5 p-3\",\n        style: {\n          border: \"1px solid #e6e6fa\",\n          boxShadow: \"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(ProjectOfTheMontInterview, {\n          imageLabel: \"COP Interview Image\",\n          editorValue: copContent,\n          editorRef: editor,\n          editorConfig: copConfig,\n          setContent: setCopContent,\n          projectInterview: projectInterviewCop,\n          addLoading: copAddLoading,\n          loading: copLoading,\n          addLabel: \"Add cop interview\",\n          editLabel: \"Edit cop interview\",\n          editFunction: EditCop,\n          addFunction: addCop,\n          logoPreview: copLogoPreview,\n          logo: copLogo,\n          setLogoPreview: setCopLogoPreview,\n          setLogo: setCopLogo,\n          inputId: \"copInterview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-5 p-3\",\n        style: {\n          border: \"1px solid #e6e6fa\",\n          boxShadow: \"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(ProjectOfTheMontInterview, {\n          imageLabel: \"DONOR Interview Image\",\n          editorValue: donorContent,\n          editorRef: editor,\n          editorConfig: donorConfig,\n          setContent: setDonorContent,\n          projectInterview: projectInterviewDonor,\n          addLoading: donorAddLoading,\n          loading: donorLoading,\n          addLabel: \"Add donor interview\",\n          editLabel: \"Edit donor interview\",\n          editFunction: editDonor,\n          addFunction: addDonor,\n          logoPreview: donorLogoPreview,\n          logo: donorLogo,\n          setLogoPreview: setDonorLogoPreview,\n          setLogo: setDonorLogo,\n          inputId: \"donorInterview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 13\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-5 p-3\",\n        style: {\n          border: \"1px solid #e6e6fa\",\n          boxShadow: \"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(ProjectOfTheMontInterview, {\n          imageLabel: \"Beneficiary Interview Image\",\n          editorValue: beneficiaryContent,\n          editorRef: editor,\n          editorConfig: beneficiaryConfig,\n          setContent: setBeneficiaryContent,\n          projectInterview: projectInterviewBeneficiary,\n          addLoading: beneficiaryAddLoading,\n          loading: beneficiaryLoading,\n          addLabel: \"Add beneficiary interview\",\n          editLabel: \"Edit beneficiary interview\",\n          editFunction: editBeneficiary,\n          addFunction: addBeneficiary,\n          logoPreview: beneficiaryLogoPreview,\n          logo: beneficiaryLogo,\n          setLogoPreview: setBeneficiaryLogoPreview,\n          setLogo: setBeneficiaryLogo,\n          inputId: \"beneficiaryInterview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProjectOfMonth, \"BQhPYKumhwhZ34Pxtxnv6JmNsDs=\", false, function () {\n  return [useParams];\n});\n\n_c = ProjectOfMonth;\nexport default ProjectOfMonth;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProjectOfMonth\");","map":{"version":3,"sources":["/Users/yasmine/Desktop/stage/aidchannel-front/src/pages/webmaster/ProjectOfMonth.js"],"names":["disabledPojectOfMonth","enablePojectOfMonth","getProject2","updateProject","React","useState","useRef","useEffect","useCallback","useParams","Flag","JoditEditor","getOneInterviewTypesByName","addInterview","getInterviewByProjectAndType","updateInterview","getCountryByCode","ProjectOfTheMontInterview","fakeLogo","Checkbox","AiFillFileAdd","urlImageAdapter","ProjectOfMonth","codeCountry","idProject","checked","setChecked","editor","copContent","setCopContent","donorContent","setDonorContent","beneficiaryContent","setBeneficiaryContent","projectContent","setProjectContent","copType","setCopType","donorType","setDonorType","beneficiaryType","setBeneficiaryType","projectInterviewCop","setProjectInterviewCop","projectInterviewDonor","setProjectInterviewDonor","projectInterviewBeneficiary","setProjectInterviewBeneficiary","test","setTest","copLoading","setCopLoading","donorLoading","setdonorLoading","beneficiaryLoading","setBeneficiaryLoading","copAddLoading","setCopAddLoading","donorAddLoading","setdonorAddLoading","beneficiaryAddLoading","setBeneficiaryAddLoading","projectEditLoading","setProjectEditLoading","copLogoPreview","setCopLogoPreview","copLogo","setCopLogo","donorLogoPreview","setDonorLogoPreview","donorLogo","setDonorLogo","beneficiaryLogoPreview","setBeneficiaryLogoPreview","beneficiaryLogo","setBeneficiaryLogo","country","setCountry","projectLogoPreview","setProjectLogoPreview","projectLogo","setProjectLogo","copConfig","readonly","placeholder","donorConfig","beneficiaryConfig","projectConfig","getDataFromApi","project","image_url","project_of_month","description","cop","donor","beneficiary","copInterview","_id","process","env","REACT_APP_BACKEND","interviewImage","donorInterview","beneficiaryInterview","interview","handleChangeCheckbox","addCop","formData","FormData","append","addDonor","addBeneficiary","EditCop","undefined","editDonor","editBeneficiary","editProject","imagePreview","e","URL","createObjectURL","target","files","marginRight","border","boxShadow","cursor","newContent"],"mappings":"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","sourcesContent":["import {\n  disabledPojectOfMonth,\n  enablePojectOfMonth,\n  getProject2,\n  updateProject,\n} from \"apis/projectApi\";\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport Flag from \"react-world-flags\";\nimport JoditEditor from \"jodit-react\";\nimport { getOneInterviewTypesByName } from \"apis/interviewTypeApi\";\nimport {\n  addInterview,\n  getInterviewByProjectAndType,\n  updateInterview,\n} from \"apis/interviewApi\";\nimport { getCountryByCode } from \"apis/countryApi\";\nimport ProjectOfTheMontInterview from \"components/aidchannel/webmaster/ProjectOfTheMontInterview\";\nimport fakeLogo from \"../../assets/images/fakeLogo.png\";\nimport { Checkbox } from \"@material-ui/core\";\nimport { AiFillFileAdd } from \"react-icons/ai\";\nimport urlImageAdapter from \"helpers/urlImageAdapter\";\n\nconst ProjectOfMonth = () => {\n  const { codeCountry, idProject } = useParams();\n  const [checked, setChecked] = useState();\n\n  const editor = useRef(null);\n  const [copContent, setCopContent] = useState(\"\");\n  const [donorContent, setDonorContent] = useState(\"\");\n  const [beneficiaryContent, setBeneficiaryContent] = useState(\"\");\n  const [projectContent, setProjectContent] = useState(\"\");\n  const [copType, setCopType] = useState(null);\n  const [donorType, setDonorType] = useState();\n  const [beneficiaryType, setBeneficiaryType] = useState();\n  const [projectInterviewCop, setProjectInterviewCop] = useState();\n  const [projectInterviewDonor, setProjectInterviewDonor] = useState();\n  const [\n    projectInterviewBeneficiary,\n    setProjectInterviewBeneficiary,\n  ] = useState();\n  const [test, setTest] = useState(false);\n  const [copLoading, setCopLoading] = useState(false);\n  const [donorLoading, setdonorLoading] = useState(false);\n  const [beneficiaryLoading, setBeneficiaryLoading] = useState(false);\n  const [copAddLoading, setCopAddLoading] = useState(false);\n  const [donorAddLoading, setdonorAddLoading] = useState(false);\n  const [beneficiaryAddLoading, setBeneficiaryAddLoading] = useState(false);\n  const [projectEditLoading, setProjectEditLoading] = useState(false);\n\n  // logos state\n  const [copLogoPreview, setCopLogoPreview] = useState(null);\n  const [copLogo, setCopLogo] = useState();\n  const [donorLogoPreview, setDonorLogoPreview] = useState(null);\n  const [donorLogo, setDonorLogo] = useState();\n  const [beneficiaryLogoPreview, setBeneficiaryLogoPreview] = useState(null);\n  const [beneficiaryLogo, setBeneficiaryLogo] = useState();\n  const [country, setCountry] = useState();\n  const [projectLogoPreview, setProjectLogoPreview] = useState(null);\n  const [projectLogo, setProjectLogo] = useState();\n\n  const copConfig = {\n    readonly: false,\n    placeholder: \"COP Interview\",\n  };\n  const donorConfig = {\n    readonly: false,\n    placeholder: \"DONOR Interview\",\n  };\n  const beneficiaryConfig = {\n    readonly: false,\n    placeholder: \"Beneficiary Interview\",\n  };\n  const projectConfig = {\n    readonly: false,\n    placeholder: \"Project of the month description\",\n  };\n\n  const getDataFromApi = useCallback(async () => {\n    const country = await getCountryByCode(codeCountry);\n    setCountry(country);\n    const project = await getProject2(idProject);\n    setProjectLogoPreview(urlImageAdapter(project?.image_url));\n    setChecked(project?.project_of_month);\n    setProjectContent(project?.description);\n    const cop = await getOneInterviewTypesByName(\"COP\");\n    setCopType(cop);\n\n    const donor = await getOneInterviewTypesByName(\"DONOR\");\n    setDonorType(donor);\n    const beneficiary = await getOneInterviewTypesByName(\"BENEFICIARY\");\n    setBeneficiaryType(beneficiary);\n    const copInterview = await getInterviewByProjectAndType(\n      project?._id,\n      cop._id\n    );\n    setProjectInterviewCop(copInterview);\n    if (copInterview)\n      setCopLogoPreview(\n        `${process.env.REACT_APP_BACKEND}${copInterview?.interviewImage}`\n      );\n\n    const donorInterview = await getInterviewByProjectAndType(\n      project?._id,\n      donor._id\n    );\n    setProjectInterviewDonor(donorInterview);\n    if (donorInterview)\n      setDonorLogoPreview(\n        `${process.env.REACT_APP_BACKEND}${donorInterview?.interviewImage}`\n      );\n\n    const beneficiaryInterview = await getInterviewByProjectAndType(\n      project?._id,\n      beneficiary._id\n    );\n    setProjectInterviewBeneficiary(beneficiaryInterview);\n    if (beneficiaryInterview)\n      setBeneficiaryLogoPreview(\n        `${process.env.REACT_APP_BACKEND}${beneficiaryInterview?.interviewImage}`\n      );\n\n    if (copInterview !== null) setCopContent(copInterview?.interview);\n    if (donorInterview !== null) setDonorContent(donorInterview?.interview);\n    if (beneficiaryInterview !== null)\n      setBeneficiaryContent(beneficiaryInterview?.interview);\n    //alert(JSON.stringify(copInterview));\n  }, [idProject]);\n\n  useEffect(() => {\n    getDataFromApi();\n  }, [getDataFromApi, test]);\n\n  const handleChangeCheckbox = async () => {\n    setChecked(!checked);\n    if (checked === true) {\n      await disabledPojectOfMonth(idProject);\n    } else {\n      await enablePojectOfMonth(idProject, codeCountry);\n    }\n  };\n\n  const addCop = async () => {\n    // initialiser les donnees\n\n    let formData = new FormData();\n    formData.append(\"interview\", copContent);\n    formData.append(\"type_interview\", copType?._id);\n    formData.append(\"project\", idProject);\n    formData.append(\"interviewImage\", copLogo);\n    formData.append(\"country\", country._id);\n    setCopAddLoading(true);\n    await addInterview(formData);\n    setTest(!test);\n    setCopAddLoading(false);\n  };\n\n  const addDonor = async () => {\n    // initialiser les donnees\n    const country = await getCountryByCode(codeCountry);\n    let formData = new FormData();\n    formData.append(\"interview\", donorContent);\n    formData.append(\"type_interview\", donorType?._id);\n    formData.append(\"project\", idProject);\n    formData.append(\"interviewImage\", donorLogo);\n    formData.append(\"country\", country._id);\n    setdonorAddLoading(true);\n    await addInterview(formData);\n    setTest(!test);\n    setdonorAddLoading(false);\n  };\n\n  const addBeneficiary = async () => {\n    // initialiser les donnees\n    const country = await getCountryByCode(codeCountry);\n    let formData = new FormData();\n    formData.append(\"interview\", beneficiaryContent);\n    formData.append(\"type_interview\", beneficiaryType?._id);\n    formData.append(\"project\", idProject);\n    formData.append(\"interviewImage\", beneficiaryLogo);\n    formData.append(\"country\", country._id);\n    setBeneficiaryAddLoading(true);\n    await addInterview(formData);\n    setTest(!test);\n    setBeneficiaryAddLoading(false);\n  };\n\n  const EditCop = async () => {\n    let formData = new FormData();\n    formData.append(\"interview\", copContent);\n    if (copLogo != undefined) formData.append(\"interviewImage\", copLogo);\n    setCopLoading(true);\n    await updateInterview(projectInterviewCop._id, formData);\n    setTest(!test);\n    setCopLoading(false);\n  };\n\n  const editDonor = async () => {\n    let formData = new FormData();\n    formData.append(\"interview\", donorContent);\n    if (donorLogo != undefined) formData.append(\"interviewImage\", donorLogo);\n    setdonorLoading(true);\n    await updateInterview(projectInterviewDonor._id, formData);\n    setTest(!test);\n    setdonorLoading(false);\n  };\n\n  const editBeneficiary = async () => {\n    let formData = new FormData();\n    formData.append(\"interview\", beneficiaryContent);\n    if (beneficiaryLogo != undefined)\n      formData.append(\"interviewImage\", beneficiaryLogo);\n    setBeneficiaryLoading(true);\n    await updateInterview(projectInterviewBeneficiary._id, formData);\n    setTest(!test);\n    setBeneficiaryLoading(false);\n  };\n\n  const editProject = async () => {\n    let formData = new FormData();\n    formData.append(\"description\", projectContent);\n    if (projectLogo != undefined) formData.append(\"projectImage\", projectLogo);\n    setProjectEditLoading(true);\n    await updateProject(idProject, formData);\n    setProjectEditLoading(false);\n  };\n  const imagePreview = (e) => {\n    setProjectLogoPreview(URL.createObjectURL(e.target.files[0]));\n    setProjectLogo(e.target.files[0]);\n  };\n  return (\n    <div className=\"container my-4\">\n      {codeCountry &&\n        projectInterviewCop !== undefined &&\n        projectInterviewDonor !== undefined &&\n        projectInterviewBeneficiary !== undefined && (\n          <>\n            <h1>\n              <Flag\n                code={codeCountry}\n                height=\"70\"\n                width=\"70\"\n                style={{ marginRight: \"2px\" }}\n                className=\"flag\"\n              />{\" \"}\n              Project Of The Month\n            </h1>\n            <hr />\n            <div className=\"form-check\">\n              <Checkbox\n                checked={checked}\n                onChange={handleChangeCheckbox}\n                inputProps={{ \"aria-label\": \"primary checkbox\" }}\n              />\n\n              <label className=\"form-check-label\" for=\"defaultCheck1\">\n                Project of the month\n              </label>\n            </div>\n            <div\n              className=\"my-5 p-3\"\n              style={{\n                border: \"1px solid #e6e6fa\",\n                boxShadow: \"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px\",\n              }}\n            >\n              <div className=\"form-group m-auto\">\n                <label\n                  className=\"ml-4 logo-file d-inline\"\n                  htmlFor=\"projectLogo\"\n                >\n                  {projectLogoPreview && (\n                    <img\n                      src={projectLogoPreview}\n                      alt=\"avatar\"\n                      style={{ cursor: \"pointer\" }}\n                      width=\"15%\"\n                      height=\"15%\"\n                      className=\"avatar\"\n                    />\n                  )}\n                  {!projectLogoPreview && (\n                    <span style={{ cursor: \"pointer\" }}>\n                      Project of Month Image{\" \"}\n                      <AiFillFileAdd color=\"blue\" size={40} />\n                    </span>\n                  )}\n                </label>\n                <input\n                  type=\"file\"\n                  className=\"form-control-file ml-4 shadow-none logo-file d-none\"\n                  id=\"projectLogo\"\n                  name=\"projectLogo\"\n                  onChange={imagePreview}\n                  multiple={false}\n                />\n              </div>\n              <div className=\"mt-4\">\n                <JoditEditor\n                  ref={editor}\n                  value={projectContent}\n                  config={projectConfig}\n                  tabIndex={1}\n                  onBlur={(newContent) => setProjectContent(newContent)}\n                />\n                {!projectEditLoading ? (\n                  <button\n                    onClick={() => editProject()}\n                    className=\"btn btn-warning  mt-3  shadow-none\"\n                  >\n                    Edit\n                  </button>\n                ) : (\n                  <div className=\"spinner-border text-danger m-3\" role=\"status\">\n                    <span className=\"sr-only\">Loading...</span>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div\n              className=\"my-5 p-3\"\n              style={{\n                border: \"1px solid #e6e6fa\",\n                boxShadow: \"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px\",\n              }}\n            >\n              <ProjectOfTheMontInterview\n                imageLabel=\"COP Interview Image\"\n                editorValue={copContent}\n                editorRef={editor}\n                editorConfig={copConfig}\n                setContent={setCopContent}\n                projectInterview={projectInterviewCop}\n                addLoading={copAddLoading}\n                loading={copLoading}\n                addLabel=\"Add cop interview\"\n                editLabel=\"Edit cop interview\"\n                editFunction={EditCop}\n                addFunction={addCop}\n                logoPreview={copLogoPreview}\n                logo={copLogo}\n                setLogoPreview={setCopLogoPreview}\n                setLogo={setCopLogo}\n                inputId=\"copInterview\"\n              />\n            </div>\n            <div\n              className=\"my-5 p-3\"\n              style={{\n                border: \"1px solid #e6e6fa\",\n                boxShadow: \"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px\",\n              }}\n            >\n              <ProjectOfTheMontInterview\n                imageLabel=\"DONOR Interview Image\"\n                editorValue={donorContent}\n                editorRef={editor}\n                editorConfig={donorConfig}\n                setContent={setDonorContent}\n                projectInterview={projectInterviewDonor}\n                addLoading={donorAddLoading}\n                loading={donorLoading}\n                addLabel=\"Add donor interview\"\n                editLabel=\"Edit donor interview\"\n                editFunction={editDonor}\n                addFunction={addDonor}\n                logoPreview={donorLogoPreview}\n                logo={donorLogo}\n                setLogoPreview={setDonorLogoPreview}\n                setLogo={setDonorLogo}\n                inputId=\"donorInterview\"\n              />\n            </div>{\" \"}\n            <div\n              className=\"my-5 p-3\"\n              style={{\n                border: \"1px solid #e6e6fa\",\n                boxShadow: \"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px\",\n              }}\n            >\n              <ProjectOfTheMontInterview\n                imageLabel=\"Beneficiary Interview Image\"\n                editorValue={beneficiaryContent}\n                editorRef={editor}\n                editorConfig={beneficiaryConfig}\n                setContent={setBeneficiaryContent}\n                projectInterview={projectInterviewBeneficiary}\n                addLoading={beneficiaryAddLoading}\n                loading={beneficiaryLoading}\n                addLabel=\"Add beneficiary interview\"\n                editLabel=\"Edit beneficiary interview\"\n                editFunction={editBeneficiary}\n                addFunction={addBeneficiary}\n                logoPreview={beneficiaryLogoPreview}\n                logo={beneficiaryLogo}\n                setLogoPreview={setBeneficiaryLogoPreview}\n                setLogo={setBeneficiaryLogo}\n                inputId=\"beneficiaryInterview\"\n              />\n            </div>\n          </>\n        )}\n    </div>\n  );\n};\n\nexport default ProjectOfMonth;\n"]},"metadata":{},"sourceType":"module"}